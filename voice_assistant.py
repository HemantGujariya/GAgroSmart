import speech_recognition as sr
import pyttsx3
import time

def speak(text):
    """App ko bolne ke liye"""
    engine = pyttsx3.init()
    engine.setProperty('rate', 165)
    engine.setProperty('voice', 'hi')  # Hindi voice support (if available)
    engine.say(text)
    engine.runAndWait()

def listen():
    """Kisan ke bolne par sunne ke liye"""
    r = sr.Recognizer()
    with sr.Microphone() as source:
        print("??? ??? ??? ???... ?????:")
        audio = r.listen(source)
    try:
        text = r.recognize_google(audio, language='hi-IN')
        print("????? ???? ???:", text)
        return text
    except sr.UnknownValueError:
        speak("???? ????, ??? ??? ???? ????? ????? ?????? ??????")
        return ""
    except sr.RequestError:
        speak("??????? ??????? ??? ?????? ???")
        return ""

def ask_crop_name():
    speak("????? ???? ??? ?? ??? ??????")
    crop = listen()
    if crop:
        speak(f"???? ??? {crop} ??? ????? ?????? ?? ??????? ????")
    return crop

if __name__ == "__main__":
    speak("?????? ????? ???, ??? ???? ??????? ???? ????")
    crop_name = ask_crop_name()
    time.sleep(1)
    speak(f"{crop_name} ?? ??? ??????? ??? ?? ??????? ????? ?? ?? ??? ???")
